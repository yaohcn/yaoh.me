---
title: "base64"
date: 2020-01-05T19:47:52+08:00
draft: false
---
关于base64编码
------
最近在与同事调试接口时，rsa签名总是验证不过。而自己在本地签名验签却没有问题，后来发现是base64编码出了问题（签名要经过base64编码后传输）。原因在于在调用openssl的编码接口时默认在每76个字符加上一个换行符。编码前设置BIO_set_flags(b64, BIO_FLAGS_BASE64_NO_NL)就ok了，具体见[例子](https://github.com/yaohcn/openssl-example/blob/master/base64_encode_exp.c)。

在解决这个问题时，深入了解了一下什么是base64？以及为什么要使用base64？
通过阮一峰的这篇[文章]()和[]()基本就能理解了。在此总结记录下。

Base64是一种基于64个可打印字符来表示二进制数据的表示方法，由于一些纯文本协议是不支持直接传输二进制数据的，比如老的邮件传输协议。http虽然也是纯文本协议，但是可以通过MIME传输二进制数据。在某些特殊情况下，比如json内部要传输二进制时候，就需要编码。所以说base64是用来以文本格式传输二进制数据的。

既然是为了传输数据，为什么不直接把二进制数据转换成hex string格式的字符串呢？因为base64编码后长度是原来的4/3，变化不大，而且内容变了，有简单的加密效果，而直接转换成字符串后，长度是原来的两倍，且没有加密效果。
